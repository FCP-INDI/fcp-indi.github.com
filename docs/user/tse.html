
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Timeseries Extraction &mdash; C-PAC 0.3.9 Alpha documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.3.9 Alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="C-PAC 0.3.9 Alpha documentation" href="index.html" />
    <link rel="up" title="Setting Up A Pipeline Configuration" href="pipeline_config.html" />
    <link rel="next" title="Spatial Smoothing" href="smoothing.html" />
    <link rel="prev" title="Motion Correction" href="motion.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="smoothing.html" title="Spatial Smoothing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="motion.html" title="Motion Correction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">C-PAC 0.3.9 Alpha documentation</a> &raquo;</li>
          <li><a href="pipeline_config.html" accesskey="U">Setting Up A Pipeline Configuration</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="timeseries-extraction">
<h1>Timeseries Extraction<a class="headerlink" href="#timeseries-extraction" title="Permalink to this headline">¶</a></h1>
<p>C-PAC lets you easily export BOLD timeseries in a number of different ways. This can be useful for those wishing to undertake advanced analysis not included in C-PAC, but still take advantage of its robust pre-processing features. For instructions on how to use these seeds within C-PAC
, please see the <a class="reference internal" href="sca.html"><em>Seed-based Correlation Analysis</em></a>.</p>
<div class="section" id="define-new-seeds">
<h2>Define New Seeds<a class="headerlink" href="#define-new-seeds" title="Permalink to this headline">¶</a></h2>
<p>Users can easily define new spherical seeds (for use in Time Series Extraction and/or Seed-based Correlation Analysis)by providing a text file containing seed definitions. Seeds are defined by providing a seed label number, x/y/z coordinates in MNI space, seed radius (in mm), and resolution. For example:</p>
<div class="highlight-python"><pre>1 -28 -40 -12 2 3mm
2 -4 48 24 3 2mm</pre>
</div>
<p>If multiple seeds are specified with the same resolution, they will be grouped into a single file containing multiple seeds, with the values within each seed ROI set to the seed label number. Note that CPAC does not check for overlapping seeds. In the event that a voxel is present in multiple seeds defined here, the value of that voxel will be set to the sum of the two seed label numbers (effectively resulting in a new seed). <strong>You will need to confirm that the seeds you define do not overlap before running CPAC.</strong></p>
<div class="figure">
<img alt="_images/tse_define_seeds.png" src="_images/tse_define_seeds.png" />
</div>
<ol class="arabic simple">
<li><strong>Seed Specification File - [path]:</strong> A path to the text file defining seeds (see above).</li>
<li><strong>Seed Output Directory - [path]:</strong> The directory where CPAC should write NIfTI files containing new seeds.</li>
<li><strong>Use New Seeds In - [checkboxes]:</strong> Select the analyses that will use the seeds.  &#8220;ROI Average Time Series Extraction&#8221; must be selected for seed-based correlation analyses.  Select &#8220;None&#8221; if you just want to save the seeds.</li>
</ol>
</div>
<div class="section" id="roi-timeseries-extraction">
<h2>ROI Timeseries Extraction<a class="headerlink" href="#roi-timeseries-extraction" title="Permalink to this headline">¶</a></h2>
<p>ROI Timeseries Extraction allows you to export the timeseries for one or more regions of interest (ROIs). This is done by calculating the average timeseries across all voxels within an ROI. As such, C-PAC will output one timeseries for each ROI specified by you.</p>
<div class="figure">
<img alt="_images/roi_timeseries.png" src="_images/roi_timeseries.png" />
</div>
<p>When an ROI is placed within a functionally homogeneous area, averaging signals in this way can produce a timeseries which may more accurately reflect the overall activity pattern in the region than does the timeseries of any individual voxel.</p>
<div class="figure">
<img alt="_images/tse_average.png" src="_images/tse_average.png" />
</div>
<ol class="arabic simple">
<li><strong>Extract ROI Average Time Series - [Off, On]:</strong>  Extract the average time series of one or more ROIs/seeds. Must be enabled if you wish to run seed-based correlation analysis.</li>
<li><strong>ROI Specification File (TSE only) - [path]:</strong> A path to a text file containing the paths pointing to NifTIs withe ROIs.  This text file must have one NifTI per line.  If this is set to &#8220;None&#8221;, C-PAC will use the seeds created in &#8220;Define New Seeds&#8221;.</li>
<li><strong>ROI Specification File (for use in SCA) - [path]</strong> The same as &#8220;ROI Specification File&#8221;, but for seed-based correlation analysis. Note: This must be defined or SCA will not be able to run.</li>
<li><strong>Output Options - [CSV, NUMPY]:</strong> Choose to save outputs as a csv file or Numpy array.  Outputs are saved as a text file and 1D file by default.</li>
</ol>
</div>
<div class="section" id="voxel-timeseries-extraction">
<h2>Voxel Timeseries Extraction<a class="headerlink" href="#voxel-timeseries-extraction" title="Permalink to this headline">¶</a></h2>
<p>Voxel Timeseries Extraction will export the individual timeseries of all voxels within one or more masks.</p>
<div class="figure">
<img alt="_images/voxel_timeseries.png" src="_images/voxel_timeseries.png" />
</div>
<div class="figure">
<img alt="_images/tse_voxel.png" src="_images/tse_voxel.png" />
</div>
<ol class="arabic simple">
<li><strong>Extract ROI Voxelwise Time Series - [Off, On]:</strong>  Extract the average time series of all voxels within one or more ROIs/seeds.</li>
<li><strong>ROI Specification File (TSE only) - [path]:</strong> A path to a text file containing the paths pointing to NifTIs withe ROIs.  This text file must have one NifTI per line.  If this is set to &#8220;None&#8221;, C-PAC will use the seeds created in &#8220;Define New Seeds&#8221;.</li>
<li><strong>ROI Specification File (for use in SCA) - [path]</strong> The same as &#8220;ROI Specification File&#8221;, but for seed-based correlation analysis. Note: This must be defined or SCA will not be able to run.</li>
<li><strong>Output Options - [CSV, NUMPY]:</strong> Choose to save outputs as a csv file or Numpy array.  Outputs are saved as a text file and 1D file by default.</li>
</ol>
</div>
<div class="section" id="spatial-regression">
<h2>Spatial Regression<a class="headerlink" href="#spatial-regression" title="Permalink to this headline">¶</a></h2>
<p>See: <a class="reference internal" href="dual_reg.html"><em>Dual Regression</em></a>.</p>
<div class="section" id="configuration-without-the-gui">
<h3>Configuration Without the GUI<a class="headerlink" href="#configuration-without-the-gui" title="Permalink to this headline">¶</a></h3>
<p>The following key/value pairs must be defined in your <a class="reference internal" href="pipeline_config.html"><em>pipeline configuration YAML</em></a> for C-PAC to run anatomical preprocessing:</p>
<div class="section" id="defining-new-seeds">
<h4>Defining New Seeds<a class="headerlink" href="#defining-new-seeds" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="52%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Potential Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>seedSpecificationFile</td>
<td>If you wish to specify new seeds (for use in Time Series Extraction and/or Seed-based Correlation Analysis), this field
should contain the full path to a text file containing seed definitions. If you do not wish to specify new seeds, this field
should be set to None.</td>
<td>A path or &#8216;None&#8217;.</td>
</tr>
<tr class="row-odd"><td>seedOutputLocation</td>
<td>Directory where CPAC should write NIfTI files containing new seeds.</td>
<td>A path.</td>
</tr>
<tr class="row-even"><td>useSeedInAnalysis</td>
<td>Which analyses to use the seeds that have been specified in.  Can be ROI Average time series extraction, ROI Voxelwise
time series extraction, network centrality, or seed-based correlation analysis.</td>
<td>A list of strings, where each string is a different analysis to use the seeds in.
Valid strings are the following: &#8216;roi_voxelwise&#8217; for voxelwise ROI time series
extraction, &#8216;roi_average&#8217; for average ROI time series extraction and seed-based
correlation analysis, and &#8216;centrality_outputs_smoothed&#8217; for network centrality.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="roi-average-tse">
<h4>ROI Average TSE<a class="headerlink" href="#roi-average-tse" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="52%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Potential Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>runROITimeseries</td>
<td>Extract the average time series of one or more ROIs/seeds. Must be enabled for seed-based correlation analysis.</td>
<td>A list where &#8216;1&#8217; represents &#8216;yes&#8217; and &#8216;0&#8217; represents &#8216;no&#8217; (e.g., &#8216;[1]&#8217;).</td>
</tr>
<tr class="row-odd"><td>roiSpecificationFile</td>
<td>Full path to a text file containing a list of ROI NifTIs.  Each line in this file should be the path to a NIfTI file
containing one or more ROIs.  All ROI mask values are converted to integers in C-PAC.</td>
<td>A path.</td>
</tr>
<tr class="row-even"><td>roiSpecificationFileForSCA</td>
<td>Same as roiSpecificationFile, but used for seed-based correlation analysis.</td>
<td>A path.</td>
</tr>
<tr class="row-odd"><td>roiTSOutputs</td>
<td>Extracted time series are written as both a text file and a 1D file by default.  With this option, you may also save them
out as CSV files or Numpy arrays.</td>
<td>A two-element list, where the first element is a boolean (&#8216;True&#8217; or &#8216;False&#8217;) for
whether or not to save out a CSV and the second element is a boolean for whether
or not to save a Numpy array.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="roi-voxelwise-tse">
<h4>ROI Voxelwise TSE<a class="headerlink" href="#roi-voxelwise-tse" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="52%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Potential Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>runVoxelTimeseries</td>
<td>Extract the time series of all voxels within one or more ROIs/seeds.</td>
<td>A list where &#8216;1&#8217; represents &#8216;yes&#8217; and &#8216;0&#8217; represents &#8216;no&#8217; (e.g., &#8216;[1]&#8217;).</td>
</tr>
<tr class="row-odd"><td>maskSpecificationFile</td>
<td>Full path to a text file containing a list of mask NifTIs. Each line in this file should be the path to a NIfTI file
containing a single mask. If you only wish to extract time series for newly defined spherical seed ROIs, set this field
to None.</td>
<td>A path or &#8216;None&#8217;.</td>
</tr>
<tr class="row-even"><td>maskSpecificationFileForSCA</td>
<td>Same as maskSpecificationFile, but used for seed-based correlation analysis.</td>
<td>A path or &#8216;None&#8217;.</td>
</tr>
<tr class="row-odd"><td>voxelTSOutputs</td>
<td>Extracted time series are written as both a text file and a 1D file by default.  With this option, you may also save them
out as CSV files or Numpy arrays.</td>
<td>A two-element list, where the first element is a boolean (&#8216;True&#8217; or &#8216;False&#8217;) for
whether or not to save out a CSV and the second element is a boolean for whether
or not to save a Numpy array.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="id1">
<h4>Spatial Regression<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="52%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Potential Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>runSpatialRegression</td>
<td>Extract the time series from one or more existing spatial maps (such as an ICA map). Required if you wish to run Dual
Regression.</td>
<td>A list where &#8216;1&#8217; represents &#8216;yes&#8217; and &#8216;0&#8217; represents &#8216;no&#8217; (e.g., &#8216;[1]&#8217;).</td>
</tr>
<tr class="row-odd"><td>spatialPatternMaps</td>
<td>Full path to a text file containing a list spatial maps. Each line in this file should be the path to a 4D NIfTI file
containing one spatial map per volume.</td>
<td>A path.</td>
</tr>
<tr class="row-even"><td>spatialDemean</td>
<td>Demean spatial maps before running spatial regression.</td>
<td>A boolean (&#8216;True&#8217; or &#8216;False&#8217;).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/cpac_logo.jpg" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing C-PAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="subject_list_config.html">Setting Up A Subject List</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline_config.html">Setting Up A Pipeline Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_analysis.html">Setting Up Group Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Running C-PAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Using C-PAC in the AWS Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Preconfigured Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">C-PAC Benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Troubleshooting and Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="rnotes.html">Release Notes</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="smoothing.html" title="Spatial Smoothing"
             >next</a> |</li>
        <li class="right" >
          <a href="motion.html" title="Motion Correction"
             >previous</a> |</li>
        <li><a href="index.html">C-PAC 0.3.9 Alpha documentation</a> &raquo;</li>
          <li><a href="pipeline_config.html" >Setting Up A Pipeline Configuration</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, C-PAC Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>