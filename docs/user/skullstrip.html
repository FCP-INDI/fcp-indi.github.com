
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Configuring CPAC to run SkullStripping: &#8212; C-PAC 1.0.3 Beta documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.3 Beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">C-PAC 1.0.3 Beta documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>SkullStripping Options
— - - - - - - - - - - -</p>
<p>Skull-stripping is the removal of skull and other non-brain tissue like dura and eyes from anatomical images, which could otherwise complicate e.g., co registration and normalization steps.[1 = <a class="reference external" href="https://en.wikibooks.org/wiki/Neuroimaging_Data_Processing/Skull_Stripping">https://en.wikibooks.org/wiki/Neuroimaging_Data_Processing/Skull_Stripping</a>]
C-PAC provides options for making Skullstripping more flexible including wether the user want to use FSL-BET(<a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BET/UserGuide">https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BET/UserGuide</a>) or AFNI-3D SkullStrip (<a class="reference external" href="https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dSkullStrip.html),and">https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dSkullStrip.html),and</a> choosing further parameters within these software.</p>
<div class="section" id="configuring-cpac-to-run-skullstripping">
<h1>Configuring CPAC to run SkullStripping:<a class="headerlink" href="#configuring-cpac-to-run-skullstripping" title="Permalink to this headline">¶</a></h1>
<div class="figure">
<img alt="_images/skullstrip_gui.png" src="_images/skullstrip_gui.png" />
</div>
<ol class="arabic simple">
<li><strong>Inputs already skull stripped? - [On,Off]:</strong> If inputs are already skull stripped then you can toggle this option to off.</li>
<li><strong>Which software do you want to skull strip with?? - [FSL, AFNI, FSL/AFNI]:</strong> Chose if you’d like to use FSL-BET, AFNI-3dSkullStrip, or run both options parallely.</li>
</ol>
</div>
<div class="section" id="configuring-cpac-to-select-afni-options">
<h1>Configuring CPAC to select AFNI options:<a class="headerlink" href="#configuring-cpac-to-select-afni-options" title="Permalink to this headline">¶</a></h1>
<div class="figure">
<img alt="_images/AFNI_gui.png" src="_images/AFNI_gui.png" />
</div>
<ol class="arabic simple">
<li>Shrink factor - [0.6]:** Set the threshold value for controlling the brain vs non-brain voxels</li>
<li>Vary shrink factor - [On,Off]:** Vary the shrink factor at every iteration of the algorithm. This prevents the likelihood of surface getting stuck in large pools of CSF before reaching the outer surface of the brain. Default is On.</li>
<li>Shrink factor bottom limit - [0.4]:** The shrink factor bottom limit sets the lower threshold when varying the shrink factor. Default is 0.4, for when edge detection is used (which is On by default),otherwise the default value is 0.4.</li>
<li>Avoid ventricles - [On,Off]:** Avoid ventricles while skull stripping. Default is On.</li>
<li>Number of iterations - [250]:** Set the number of iterations. Default is 250. The number of iterations should depend upon the density of your mesh. Default is 250.</li>
<li>Pushout - [On, Off]:** While expanding, consider the voxels above and not only the voxels below. Default is On</li>
<li>Touchup - [On,Off]:** Perform touchup operations at the end to include areas not covered by surface expansion.</li>
<li>Fill hole option - [10]:** Give the maximum number of pixels on either sid of the hole that can be filled. The default is 10 only if ’Touchup’ is On. Otherwise default is 0.</li>
<li>NN smooth - [72]:** Perform final surface smoothing after all iterations. Default is 20.</li>
<li>Avoid eyes - [On,Off]:** Avoid eyes while skull stripping. Default is On.</li>
<li>Use edge - [On,Off]: ** Use edge detection to reduce leakage into meninges.Default is On.</li>
<li>Fractional expansion - [0.1]: ** Speed of expansion.Default Value is 0.1</li>
<li>Push to edge - [Off,On]:** Perform aggressive push to edge, this might cause leakage. Default is Off.</li>
<li>Use Skull - [Off, On]:** Use the outer skull to limit expansion of surface into the skull in case of very strong shading artifacts. Use this only if you leakage into the skull.</li>
<li>Perc_init - [0]:** Percentage of segments allowed to intersect surface.It is typically a number between 0 and 0.1, but can include negative values (which implies no testing for intersection). Default is 0.</li>
<li>Max_inter_iter - [4]:** Number of iterations to remove intersection problems. With each iteration, the program automatically increases the amount of smoothing to get rid of intersections. Default is 4.</li>
<li>Fac - [1]:** Multiply input dataset by FAC if range of values is too small. Default value is 1.</li>
<li>blur_fwhm - [2]:** Blur datasets after spatial normalization.Default value is 2.</li>
</ol>
</div>
<div class="section" id="configuring-cpac-to-select-fsl-options">
<h1>Configuring CPAC to select FSL options:<a class="headerlink" href="#configuring-cpac-to-select-fsl-options" title="Permalink to this headline">¶</a></h1>
<div class="figure">
<img alt="_images/FSL_gui.png" src="_images/FSL_gui.png" />
</div>
<ol class="arabic simple">
<li>Frac - [0.5]:** Set the threshold value controlling the brain vs non-brain voxels. Default is 0.5</li>
<li>Mask - [Off, On]:** Mask created along with skull stripping. Default option is Off.</li>
<li>Mesh - [Off, On]:** Mesh created along with skull stripping. Default is Off.</li>
<li>Outline - [Off, On]:** Create a surface outline image, Default is Off.</li>
<li>Padding - [Off, On]:** Add padding to the end of the image, improving BET. Mutually exclusive functional,reduce_bias,robust,padding,remove_eyes,surfaces.</li>
<li>Radius - [0]:** Integer value of head radius. Default is 0.</li>
<li>Reduce bias - [Off, On]:** Reduce bias and cleanup neck. Mutually exclusive with functional, reduce_bias,robust,padding, remove_eyes,surfaces.</li>
<li>Remove_bias - [Off,On]:** Eyes and optic nerve cleanup. Mutually exclusive with functional, reduce_bias,robust,padding,remove_eyes, surfaces.</li>
<li>Robust - [Off, On]:** Robust brain center estimation. Mutually exclusive with functional, reduce_bias, robust,padding,remove_eyes,surfaces.</li>
</ol>
<p>#.Skull - [Off,On]:** Crate a Skull Image. Default is Off.</p>
<ol class="arabic simple">
<li>Surfaces - [Off, On]:** Get additional skull and scalp surfaces by running bet2 and betsurf. This is mutually exclusive with reduce bias, robust,padding, remove_eyes.</li>
<li>Threshold - [Off,On]:** Apply thresholding to segmented brain image and mask.Default is Off.</li>
</ol>
<p>#.Vertical gradient - [Off,On]:<a href="#id1"><span class="problematic" id="id2">**</span></a>Vertical gradient un fractional intensity threshold. Within the rang of (-1,1).</p>
<p>Configuration AFNI option without the GUI:
‘’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’’</p>
<p>figure:: /_images/skullstrip_yaml.png</p>
<p>The following key/value pairs must be defined in your :doc:’pipeline configuration YAML &lt;/pipeline_config&gt;’ for C-PAC to run anatomical preprocessing:</p>
<dl class="docutils">
<dt>This is what the parameters might look like when defined in the YAML:</dt>
<dd>already_skullstripped : [0]
Skullstrip Option : [AFNI]
Shrink factor : [0.6]
Vary shrink factor : [On]
Shrink factor bottom limit: [0.4]
Avoid ventricles: [On]
Number of iterations: [250]
Push out : [On]
Touch up: [On]
Fill hole option: [10]
NN smooth: [72]
Smooth final : [20]
Avoid eyes : [On]
Use edge : [On]
Fractional expansion: [0.1]
Push to edge : [Off]
Use skull : [Off]
Perc_init : [0]
Max_inter_iter : [4]
Fac : [1]
blur_fwhm : [2]</dd>
</dl>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/cpac_logo_vertical.jpeg" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing C-PAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="subject_list_config.html">Setting Up A Subject List</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipeline_config.html">Setting Up A Pipeline Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html">Pre-Processing Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="derivatives.html">Computable Derivatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_analysis.html">Setting Up Group Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Running C-PAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Running C-PAC as a Docker App</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Using C-PAC in the AWS Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="openneuro.html">Using C-PAC in OpenNeuro</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Preconfigured Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">C-PAC Benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Troubleshooting and Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="rnotes.html">Release Notes</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">C-PAC 1.0.3 Beta documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, C-PAC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>