
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Timeseries Analysis &#8212; C-PAC 1.4.1 Beta documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Network Centrality" href="network_centrality.html" />
    <link rel="prev" title="Registration" href="registration.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="network_centrality.html" title="Network Centrality"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="registration.html" title="Registration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">C-PAC 1.4.1 Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Workflows</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-CPAC.timeseries">
<span id="timeseries-analysis"></span><h1>Timeseries Analysis<a class="headerlink" href="#module-CPAC.timeseries" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="CPAC.timeseries.create_surface_registration">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">create_surface_registration</code><span class="sig-paren">(</span><em>wf_name='surface_registration'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#create_surface_registration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.create_surface_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow to generate surface from anatomical data and register 
the structural data to FreeSurfer anatomical and assign it 
to a surface vertex.</p>
<dl class="docutils">
<dt>wf_name <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>name of the workflow</dd>
</dl>
<dl class="docutils">
<dt>wflow <span class="classifier-delimiter">:</span> <span class="classifier">workflow object</span></dt>
<dd>workflow object</dd>
</dl>
<p><a class="reference external" href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/timeseries/timeseries_analysis.py">Source</a></p>
<p>Workflow Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputspec</span><span class="o">.</span><span class="n">rest</span> <span class="p">:</span> <span class="n">string</span>  <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="nb">input</span> <span class="n">functional</span> <span class="n">data</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">brain</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">skull</span> <span class="n">stripped</span> <span class="n">anatomical</span> <span class="n">image</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">recon_subjects</span> <span class="p">:</span> <span class="n">string</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">subjects</span> <span class="n">directory</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">subject_id</span> <span class="p">:</span> <span class="n">string</span>
    <span class="n">subject</span> <span class="nb">id</span> 
</pre></div>
</div>
<p>Workflow Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputspec</span><span class="o">.</span><span class="n">reconall_subjects_dir</span> <span class="p">:</span> <span class="n">string</span>
    <span class="n">freesurfer</span> <span class="n">subjects</span> <span class="n">directory</span>
<span class="n">outputspec</span><span class="o">.</span><span class="n">reconall_subjects_id</span> <span class="p">:</span> <span class="n">string</span>
    <span class="n">subject</span> <span class="nb">id</span> <span class="k">for</span> <span class="n">which</span> <span class="n">anatomical</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">taken</span>
<span class="n">outputspec</span><span class="o">.</span><span class="n">out_reg_file</span> <span class="p">:</span> <span class="n">string</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">bbregister</span> <span class="n">output</span> <span class="n">registration</span> <span class="n">file</span>
<span class="n">outputspec</span><span class="o">.</span><span class="n">lh_surface_file</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">mgz</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">left</span> <span class="n">hemisphere</span> <span class="n">cortical</span> <span class="n">surface</span> <span class="n">file</span> 
<span class="n">outputspec</span><span class="o">.</span><span class="n">rh_surface_file</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">mgz</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">right</span> <span class="n">hemisphere</span> <span class="n">cortical</span> <span class="n">surface</span> <span class="n">file</span> 
</pre></div>
</div>
<p>Order of commands:</p>
<ul>
<li><p class="first">Generate surfaces and rois of structural data from T1 anatomical Image using FreeSurfer’s reconall . For details see <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/recon-all">ReconAll</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recon</span><span class="o">-</span><span class="nb">all</span> <span class="o">-</span><span class="nb">all</span> <span class="o">-</span><span class="n">subjid</span> <span class="mi">0010001</span> <span class="o">-</span><span class="n">sd</span> <span class="n">working_dir</span><span class="o">/</span><span class="n">SurfaceRegistration</span><span class="o">/</span><span class="n">anat_reconall</span>
</pre></div>
</div>
</li>
<li><p class="first">Register input volume to the FreeSurfer anatomical using FreeSurfer’s bbregister. The input is the output of the recon-all command. For details see <a class="reference external" href="http://surfer.nmr.mgh.harvard.edu/fswiki/bbregister">BBRegister</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bbregister</span> <span class="o">--</span><span class="n">t2</span> <span class="o">--</span><span class="n">init</span> <span class="o">-</span><span class="n">fsl</span> <span class="o">--</span><span class="n">reg</span> <span class="n">structural_bbreg_me</span><span class="o">.</span><span class="n">dat</span> <span class="o">--</span><span class="n">mov</span> <span class="n">structural</span><span class="o">.</span><span class="n">nii</span> <span class="o">--</span><span class="n">s</span> <span class="mi">0010001</span>
</pre></div>
</div>
</li>
<li><p class="first">Assign values from a volume to each surface vertex using FreeSurfer’s mri_vol2surf . For details see <a class="reference external" href="http://surfer.nmr.mgh.harvard.edu/fswiki/mri_vol2surf">mri_vol2surf</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">For</span> <span class="n">left</span> <span class="n">hemisphere</span>
<span class="n">mri_vol2surf</span> <span class="o">--</span><span class="n">mov</span> <span class="n">structural</span><span class="o">.</span><span class="n">nii</span> <span class="o">--</span><span class="n">reg</span> <span class="n">structural_bbreg_me</span><span class="o">.</span><span class="n">dat</span> <span class="o">--</span><span class="n">interp</span> <span class="n">trilin</span> <span class="o">--</span><span class="n">projfrac</span> <span class="mf">0.5</span> <span class="o">--</span><span class="n">hemi</span> <span class="n">lh</span> <span class="o">--</span><span class="n">o</span> <span class="n">surface_file</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span> 

<span class="n">For</span> <span class="n">right</span> <span class="n">hemisphere</span>        
<span class="n">mri_vol2surf</span> <span class="o">--</span><span class="n">mov</span> <span class="n">structural</span><span class="o">.</span><span class="n">nii</span> <span class="o">--</span><span class="n">reg</span> <span class="n">structural_bbreg_me</span><span class="o">.</span><span class="n">dat</span> <span class="o">--</span><span class="n">interp</span> <span class="n">trilin</span> <span class="o">--</span><span class="n">projfrac</span> <span class="mf">0.5</span> <span class="o">--</span><span class="n">hemi</span> <span class="n">rh</span> <span class="o">--</span><span class="n">o</span> <span class="n">surface_file</span><span class="o">.</span><span class="n">nii</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</li>
</ul>
<p>High Level Workflow Graph:</p>
<a class="reference internal image-reference" href="workflows/../images/surface_registration.dot.png"><img alt="workflows/../images/surface_registration.dot.png" src="workflows/../images/surface_registration.dot.png" style="width: 1000px;" /></a>
<p>Detailed Workflow Graph:</p>
<a class="reference internal image-reference" href="workflows/../images/surface_registration_detailed.dot.png"><img alt="workflows/../images/surface_registration_detailed.dot.png" src="workflows/../images/surface_registration_detailed.dot.png" style="width: 1000px;" /></a>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">CPAC.timeseries.timeseries_analysis</span> <span class="k">as</span> <span class="nn">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">create_surface_registration</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">rest</span> <span class="o">=</span> <span class="s1">&#39;/home/data/sub001/rest.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">brain</span> <span class="o">=</span> <span class="s1">&#39;/home/data/sub001/anat.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">recon_subjects</span> <span class="o">=</span> <span class="s1">&#39;/home/data/working_dir/SurfaceRegistration/anat_reconall&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">subject_id</span> <span class="o">=</span> <span class="s1">&#39;sub001&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> 
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.get_voxel_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">get_voxel_timeseries</code><span class="sig-paren">(</span><em>wf_name='voxel_timeseries'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#get_voxel_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.get_voxel_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow to extract time series for each voxel
in the data that is present in the input mask</p>
<dl class="docutils">
<dt>wf_name <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>name of the workflow</dd>
</dl>
<dl class="docutils">
<dt>wflow <span class="classifier-delimiter">:</span> <span class="classifier">workflow object</span></dt>
<dd>workflow object</dd>
</dl>
<p><a class="reference external" href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/timeseries/timeseries_analysis.py">Source</a></p>
<p>Workflow Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputspec</span><span class="o">.</span><span class="n">rest</span> <span class="p">:</span> <span class="n">string</span>  <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="nb">input</span> <span class="n">functional</span> <span class="n">data</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">output_type</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="nb">list</span> <span class="n">of</span> <span class="n">boolean</span><span class="p">)</span>
    <span class="nb">list</span> <span class="n">of</span> <span class="n">boolean</span> <span class="k">for</span> <span class="n">csv</span> <span class="ow">and</span> <span class="n">npz</span> <span class="n">file</span> <span class="n">formats</span>
<span class="n">input_mask</span><span class="o">.</span><span class="n">masks</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">ROI</span> <span class="n">mask</span>
</pre></div>
</div>
<p>Workflow Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputspec</span><span class="o">.</span><span class="n">mask_outputs</span><span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="mi">1</span><span class="n">D</span><span class="p">,</span> <span class="n">csv</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">npz</span> <span class="n">files</span><span class="p">)</span>
    <span class="nb">list</span> <span class="n">of</span> <span class="n">time</span> <span class="n">series</span> <span class="n">matrices</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">csv</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span>
    <span class="n">npz</span> <span class="n">files</span><span class="o">.</span><span class="n">By</span> <span class="n">default</span> <span class="n">it</span> <span class="n">outputs</span> <span class="n">mean</span> <span class="n">of</span> <span class="n">voxels</span> 
    <span class="n">across</span> <span class="n">each</span> <span class="n">time</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">afni</span> <span class="n">compatible</span> <span class="mi">1</span><span class="n">D</span> <span class="n">file</span><span class="o">.</span>

<span class="n">High</span> <span class="n">Level</span> <span class="n">Workflow</span> <span class="n">Graph</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">CPAC.timeseries.timeseries_analysis</span> <span class="k">as</span> <span class="nn">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_voxel_timeseries</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">rest</span> <span class="o">=</span> <span class="s1">&#39;/home/data/rest.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">input_mask</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="s1">&#39;/usr/local/fsl/data/standard/MNI152_T1_2mm_brain.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">output_type</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.get_roi_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">get_roi_timeseries</code><span class="sig-paren">(</span><em>wf_name='roi_timeseries'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#get_roi_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.get_roi_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow to extract timeseries for each node in the ROI mask.
For each node, mean across all the timepoint is calculated and stored 
in csv and npz format.</p>
<dl class="docutils">
<dt>wf_name <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>name of the workflow</dd>
</dl>
<dl class="docutils">
<dt>wflow <span class="classifier-delimiter">:</span> <span class="classifier">workflow object</span></dt>
<dd>workflow object</dd>
</dl>
<p><a class="reference external" href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/timeseries/timeseries_analysis.py">Source</a></p>
<p>Workflow Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputspec</span><span class="o">.</span><span class="n">rest</span> <span class="p">:</span> <span class="n">string</span>  <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="nb">input</span> <span class="n">functional</span> <span class="n">data</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">output_type</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="nb">list</span> <span class="n">of</span> <span class="n">boolean</span><span class="p">)</span>
    <span class="nb">list</span> <span class="n">of</span> <span class="n">boolean</span> <span class="k">for</span> <span class="n">csv</span> <span class="ow">and</span> <span class="n">npz</span> <span class="n">file</span> <span class="n">formats</span>
<span class="n">input_roi</span><span class="o">.</span><span class="n">roi</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">ROI</span> <span class="n">mask</span>
</pre></div>
</div>
<p>Workflow Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputspec</span><span class="o">.</span><span class="n">roi_outputs</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="nb">list</span> <span class="n">of</span> <span class="n">files</span><span class="p">)</span>
    <span class="n">Voxel</span> <span class="n">time</span> <span class="n">series</span> <span class="n">stored</span> <span class="ow">in</span> <span class="mi">1</span><span class="n">D</span> <span class="p">(</span><span class="n">column</span> <span class="n">wise</span> <span class="n">timeseries</span> <span class="k">for</span> <span class="n">each</span> <span class="n">node</span><span class="p">),</span> 
    <span class="n">csv</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">npz</span> <span class="n">files</span><span class="o">.</span> <span class="n">By</span> <span class="n">default</span> <span class="n">it</span> <span class="n">outputs</span> <span class="n">timeseries</span> <span class="ow">in</span> <span class="n">a</span> <span class="mi">1</span><span class="n">D</span> <span class="n">file</span><span class="o">.</span>
    <span class="n">The</span> <span class="mi">1</span><span class="n">D</span> <span class="n">file</span> <span class="ow">is</span> <span class="n">compatible</span> <span class="k">with</span> <span class="n">afni</span> <span class="n">interfaces</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">CPAC.timeseries.timeseries_analysis</span> <span class="k">as</span> <span class="nn">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_roi_timeseries</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">rest</span> <span class="o">=</span> <span class="s1">&#39;/home/data/rest.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">input_roi</span><span class="o">.</span><span class="n">roi</span> <span class="o">=</span> <span class="s1">&#39;/usr/local/fsl/data/atlases/HarvardOxford/HarvardOxford-cort-maxprob-thr0-2mm.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">output_type</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.get_vertices_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">get_vertices_timeseries</code><span class="sig-paren">(</span><em>wf_name='vertices_timeseries'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#get_vertices_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.get_vertices_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow to get vertices time series from a FreeSurfer surface file</p>
<dl class="docutils">
<dt>wf_name <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>name of the workflow</dd>
</dl>
<dl class="docutils">
<dt>wflow <span class="classifier-delimiter">:</span> <span class="classifier">workflow object</span></dt>
<dd>workflow object</dd>
</dl>
<p><a class="reference external" href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/timeseries/timeseries_analysis.py">Source</a></p>
<p>Workflow Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputspec</span><span class="o">.</span><span class="n">lh_surface_file</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">left</span> <span class="n">hemishpere</span> <span class="n">surface</span> <span class="n">file</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">rh_surface_file</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">right</span> <span class="n">hemisphere</span> <span class="n">surface</span> <span class="n">file</span>
</pre></div>
</div>
<p>Workflow Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputspec</span><span class="o">.</span><span class="n">surface_outputs</span><span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">csv</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">npz</span> <span class="n">files</span><span class="p">)</span>
    <span class="nb">list</span> <span class="n">of</span> <span class="n">timeseries</span> <span class="n">matrices</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">csv</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span>
    <span class="n">npz</span> <span class="n">files</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">CPAC.timeseries.timeseries_analysis</span> <span class="k">as</span> <span class="nn">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_vertices_timeseries</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">lh_surface_file</span> <span class="o">=</span> <span class="s1">&#39;/home/data/outputs/SurfaceRegistration/lh_surface_file.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">rh_surface_file</span> <span class="o">=</span> <span class="s1">&#39;/home/data/outputs/SurfaceRegistration/rh_surface_file.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.gen_vertices_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">gen_vertices_timeseries</code><span class="sig-paren">(</span><em>rh_surface_file</em>, <em>lh_surface_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#gen_vertices_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.gen_vertices_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to extract timeseries from vertices
of a freesurfer surface file</p>
<dl class="docutils">
<dt>rh_surface_file <span class="classifier-delimiter">:</span> <span class="classifier">string (mgz/mgh file)</span></dt>
<dd>left hemisphere FreeSurfer surface file</dd>
<dt>lh_surface_file <span class="classifier-delimiter">:</span> <span class="classifier">string (mgz/mgh file)</span></dt>
<dd>right hemisphere FreeSurfer surface file</dd>
</dl>
<dl class="docutils">
<dt>out_list <span class="classifier-delimiter">:</span> <span class="classifier">string (list of file)</span></dt>
<dd>list of vertices timeseries csv files</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.gen_voxel_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">gen_voxel_timeseries</code><span class="sig-paren">(</span><em>data_file</em>, <em>template</em>, <em>output_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#gen_voxel_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.gen_voxel_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to extract timeseries for each voxel
in the data that is present in the input mask</p>
<dl class="docutils">
<dt>datafile <span class="classifier-delimiter">:</span> <span class="classifier">string (nifti file)</span></dt>
<dd>path to input functional data</dd>
<dt>template <span class="classifier-delimiter">:</span> <span class="classifier">string (nifti file) </span></dt>
<dd>path to input mask in functional native space</dd>
<dt>output_type :list</dt>
<dd>list of two boolean values suggesting
the output types - numpy npz file and csv 
format</dd>
</dl>
<dl class="docutils">
<dt>out_list <span class="classifier-delimiter">:</span> <span class="classifier">list of files</span></dt>
<dd>Based on ouput_type options method returns a list containing 
path to npz and csv file having timeseries of each voxel in 
the data that is present in the input mask.The row header 
corresponds to voxel’s xyz cordinates and column headers corresponds 
to the volume index in the csv. By default it outputs afni compatible 
1D file with mean of timeseries of voxels across timepoints.</dd>
</dl>
<p>Exception</p>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.gen_roi_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">gen_roi_timeseries</code><span class="sig-paren">(</span><em>data_file</em>, <em>template</em>, <em>output_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#gen_roi_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.gen_roi_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to extract mean of voxel across
all timepoints for each node in roi mask</p>
<dl class="docutils">
<dt>data_file <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>path to input functional data</dd>
<dt>template <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>path to input roi mask in functional native space</dd>
<dt>output_type <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>list of two boolean values suggesting
the output types - numpy npz file and csv
format</dd>
</dl>
<dl class="docutils">
<dt>out_list <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>list of 1D file, txt file, csv file and/or npz file containing
mean timeseries for each scan corresponding
to each node in roi mask</dd>
</dl>
<p>Exception</p>
</dd></dl>

<dl class="function">
<dt id="CPAC.timeseries.get_spatial_map_timeseries">
<code class="descclassname">CPAC.timeseries.</code><code class="descname">get_spatial_map_timeseries</code><span class="sig-paren">(</span><em>wf_name='spatial_map_timeseries'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/CPAC/timeseries/timeseries_analysis.html#get_spatial_map_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#CPAC.timeseries.get_spatial_map_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><p>Workflow to regress each provided spatial
map to the subjects functional 4D file in order
to return a timeseries for each of the maps</p>
<dl class="docutils">
<dt>wf_name <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>name of the workflow</dd>
</dl>
<dl class="docutils">
<dt>wflow <span class="classifier-delimiter">:</span> <span class="classifier">workflow object</span></dt>
<dd>workflow object</dd>
</dl>
<p><a class="reference external" href="https://github.com/FCP-INDI/C-PAC/blob/master/CPAC/timeseries/timeseries_analysis.py">Source</a></p>
<p>Workflow Inputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputspec</span><span class="o">.</span><span class="n">subject_rest</span> <span class="p">:</span> <span class="n">string</span>  <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="nb">input</span> <span class="n">functional</span> <span class="n">data</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">subject_mask</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">subject</span> <span class="n">functional</span> <span class="n">mask</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">spatial_map</span> <span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">nifti</span> <span class="n">file</span><span class="p">)</span>
    <span class="n">path</span> <span class="n">to</span> <span class="n">Spatial</span> <span class="n">Maps</span>
<span class="n">inputspec</span><span class="o">.</span><span class="n">demean</span> <span class="p">:</span> <span class="n">Boolean</span>
    <span class="n">control</span> <span class="n">whether</span> <span class="n">to</span> <span class="n">demean</span> <span class="n">model</span> <span class="ow">and</span> <span class="n">data</span>
</pre></div>
</div>
<p>Workflow Outputs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">outputspec</span><span class="o">.</span><span class="n">subject_timeseries</span><span class="p">:</span> <span class="n">string</span> <span class="p">(</span><span class="n">txt</span> <span class="n">file</span><span class="p">)</span>
    <span class="nb">list</span> <span class="n">of</span> <span class="n">time</span> <span class="n">series</span> <span class="n">stored</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">space</span> <span class="n">separated</span>
    <span class="n">txt</span> <span class="n">file</span>
    <span class="n">the</span> <span class="n">columns</span> <span class="n">are</span> <span class="n">spatial</span> <span class="n">maps</span><span class="p">,</span> <span class="n">rows</span> <span class="n">are</span> <span class="n">timepoints</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">CPAC.timeseries.timeseries_analysis</span> <span class="k">as</span> <span class="nn">t</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_spatial_map_timeseries</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">subject_rest</span> <span class="o">=</span> <span class="s1">&#39;/home/data/rest.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">subject_mask</span> <span class="o">=</span> <span class="s1">&#39;/home/data/rest_mask.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">ICA_map</span> <span class="o">=</span> <span class="s1">&#39;/home/data/spatialmaps/spatial_map.nii.gz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">inputspec</span><span class="o">.</span><span class="n">demean</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/cpac_logo_vertical.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="registration.html"
                        title="previous chapter">Registration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="network_centrality.html"
                        title="next chapter">Network Centrality</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/workflows/timeseries.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="network_centrality.html" title="Network Centrality"
             >next</a> |</li>
        <li class="right" >
          <a href="registration.html" title="Registration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">C-PAC 1.4.1 Beta documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Workflows</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, C-PAC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-19224662-10"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-19224662-10');
    </script>

  </body>
</html>